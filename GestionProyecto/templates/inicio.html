{% extends "index.html" %}
{% load static %}

{% block Titulo %} Inicio {% endblock Titulo %}

{% block Contenido %}

<header class="h-max  bg-blue-800 text-white flex flex-col items-center px-7 pb-10">
    <nav class="flex flex-col w-full md:flex-row justify-center md:justify-around items-center gap-4 p-4">
        <h2 class="text-5xl  font-black">SOFT</h2>

        <div class="flex items-center gap-10 font-medium">
            <a href="#">Inicio</a>
            {% if user.is_authenticated %}
            <a href='{% url "Perfil" %}' class="cursor-pointer">
                
                <svg class="fill-white h-10 w-10" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M12 2a5 5 0 1 0 5 5 5 5 0 0 0-5-5m0 8a3 3 0 1 1 3-3 3 3 0 0 1-3 3m9 11v-1a7 7 0 0 0-7-7h-4a7 7 0 0 0-7 7v1h2v-1a5 5 0 0 1 5-5h4a5 5 0 0 1 5 5v1z"/>
                </svg>                                  
                
                
            </a>
            {% else %}
            <a href="{% url "Login" %}">Login</a>
            <a href="{% url "Registro" %}">Registro</a>
                
            {% endif %}
        </div>
    </nav>

    <section class="grid place-items-center justify-center md:grid-flow-col md:my-40 auto-cols-fr  gap-10">
        <figure class="w-70 h-70 my-10 md:my-0">
            <svg class="fill-white w-full h-full" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 835.62 1018.93">
                <path d="M833.78 528.82c-14.43-148.28-114.9-280.44-250.92-339.39C536.05 169.14 484.71 154 433.9 152c-33.86-1.3-74.34-2.61-105.5 14.55-40.88 22.51-32.25 85.4-18.06 122 15.46 39.85 45 67.79 71.12 100.27 45.34 56.39 83.63 119.14 94.86 191.76 21.83 164.15-67.14 278.57-179.11 385.18 10.88 4.13 16.26 6.86 22 8.23 76.65 18.42 151.92 14.38 228.23-6.54 178.32-48.88 294.63-235 287.94-415.37q-.47-11.71-1.6-23.26m-458.42-58.53c-10.92-12.83-22.59-25-34.44-36.38-21.38-20.61-45.49-37.49-65.06-60.22-16.45-19.1-30.38-40.56-39.38-64.19-34.57-90.8 16.31-183.62 64.35-258.76 9.94-15.55 20.06-38.21 33.56-50.74-53.82 50-101.92 100.33-148.74 151.32-61.48 67-74.16 139-45.45 216.93 18.92 51.41 66.55 88.25 107.64 128.81 34.07 43.5 55.13 90.09 60.42 140.15 8 75.77-35.66 133.75-76.59 192.31q-67.47 96.54-140 189.41c52.93-28 96.43-70.54 141.77-109.67 48.54-41.89 100.1-80.6 144.21-127.13 28.31-29.86 43.9-63.8 55.26-103.35 9.25-32.19 8.56-66.75 1.25-99.44-9.16-40.83-31.65-77.13-58.8-109.05M73 958.13c12.22-9 22.67-24.24 29.07-31.48 46.75-52.9 84.45-110 121.3-167q5-7.68 9.76-15.42c20.67-33.36 34.5-73.08 28.07-113-6.26-38.88-29.85-77.47-54.09-107.79-1-1.28-2.06-2.56-3.1-3.82-25.28-30.6-59.77-51.83-81.68-85.26-55.34-84.47-61.54-169.25-13.39-256 6-10.83 13.29-21.27 20.07-31.87 6.63-10.35 13.36-20.67 20.05-31C85.77 175.35 16.42 231.79 3.13 311.4a203.3 203.3 0 0 0 8.94 103.17c11.68 32.43 31.84 62.9 57.2 90.77 7.34 8.06 15.14 15.9 23.27 23.55a222 222 0 0 1 19.72 20.33c8 9.64 13.74 20.33 19.9 30.67 8.33 14 16 28.08 21.44 42.82a227.2 227.2 0 0 1 11.85 46.08c5.72 39.19.36 78.81-12.93 116.92m-60.05 40.58c26.63-75.65 29.35-149-6.54-222.21-21.35-43.53-50.7-82.52-77.34-123 1.47 2.23-2.91 15.65-3.39 18.68Q3.45 510.8 2.29 522A430 430 0 0 0 0 565a441.95 441.95 0 0 0 73 244.45c5 7.45 8.75 13.84 16.75 18"/>
            </svg>          
        </figure>
        
        <article class="flex flex-col gap-10 place-items-center">
            <h3 class="text-5xl  font-black">Soft Project</h3>
            <p class="text-lg">Optimiza el seguimiento de tus tareas y las de tu equipo con un tablero digital, y ve cómo el trabajo fluye de 'Tareas Pendientes' a 'Tareas Finalizadas'.</p>
            <a href="#proyectos" class="botonStyle text-center">Empezar</a>
        </article>
    </section>
</header>


<!-- Modal de crear Proyecto -->
<div class="fixed top-0 left-0 z-99 hidden text-white" id="modalCrearProyecto">
    <div class="w-screen h-screen bg-black/30 flex items-center justify-center">

        <div class="bg-blue-900 w-[22rem] h-[30rem] rounded-md flex flex-col items-center justify-around gap-5 p-10">
            
            <h2 class="font-bold text-3xl">Crear Proyecto</h2>

            <form method="post" class="flex flex-col items-center justify-around gap-4 w-full">

                {% csrf_token %}

                {% if aviso %}

                    <span class="font-bold text-red-500">{{ aviso }}</span>
                    
                {% endif %}

                <label class="flex flex-col font-semibold text-lg gap-3 w-full">
                    Nombre del Proyecto
                    <input required name="NombreProyecto" class="inputStyle" type="text">
                </label>

                <button required class="botonStyle" onclick="">Crear</button>

            </form>
            <button class="botonStyle" onclick="CloseModal('modalCrearProyecto')">Cancelar</button>
        </div>

    </div>
</div>

<main class="h-max text-white flex flex-col items-center px-7 py-10">
    {% if user.is_authenticated %}

        <section id="proyectos" class="w-full">
            <h3 class="text-4xl font-bold text-center mb-10">Tus Proyectos</h3>
            
            <article class="grid my-5 gap-15 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4">
                
                {% for proyecto in proyectos %}
                
                <div class="bg-blue-800 w-full h-max rounded-2xl p-5">
                        <h4 class="text-xl font-bold mb-5">{{ proyecto.id_proyecto.nombre }}</h4>
                        
                        {% for datos in datosProyecto %}
                            {% if proyecto.id_proyecto == datos.0 %}
                                <span class="text-lg font-medium">Tareas: <strong>{{datos.1.TareasTotal}}</strong> </span>
                                <p class="text-lg font-medium">Miembros: <strong>{{datos.1.MiembrosTotal}}</strong> </p>
                            {% endif %}
                        {% endfor %}

                        <div class="w-full flex flex-row-reverse">
                            <a href='{% url "ProyectoTablero" proyecto.id_proyecto.id_proyecto %}' class="botonStyle w-30 mt-5 text-center">Entrar</a>
                        </div>
                    </div>

                {% endfor %}

    
                <div onclick="OpenModal('modalCrearProyecto')" class="bg-blue-800 cursor-pointer select-none w-full h-max rounded-2xl p-5 flex flex-col justify-center items-center">
                    <h4 class="text-2xl font-bold mb-5">Crea tu Proyecto</h4>
                    <figure>
                        <svg class="fill-white w-30 h-30" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M20 2H8c-1.103 0-2 .897-2 2v12c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2V4c0-1.103-.897-2-2-2m-2 9h-3v3h-2v-3h-3V9h3V6h2v3h3zM4 22h12v-2H4V8H2v12c0 1.103.897 2 2 2"/>
                        </svg>                      
                    </figure>
                </div>

            </article>
        </section>
    
    {% else %}

        <section id="proyectos" class="w-full max-w-screen-lg">
            <h3 class="text-3xl font-bold text-center mb-10">Colabora y Conquista</h3>
            <article class="grid md:grid-flow-col auto-rows-[1fr_1fr_7rem] md:auto-rows-[1fr_5rem] auto-cols-fr place-items-center gap-5 md:gap-20 md:p-10">
                <figure class="w-full h-[15rem] sombraPanels md:col-start-2">
                    <img class="select-none pointer-events-none w-full h-full object-fill" src="{% static 'img/Capture.png' %}" alt="">
                </figure>
                <p class="text-xl text-center">Con nuestra plataforma, podrás visualizar el avance de tus proyectos de forma clara y sencilla. Mantén a tu equipo sincronizado, optimiza los recursos y asegura el cumplimiento de los objetivos.</p>
                <div class="flex flex-col md:flex-row gap-10 md:col-start-1 md:col-end-3 md:row-start-2">
                    <a class="botonStyle text-center" href="{% url "Login" %}">Login</a>
                    <a class="botonStyle text-center" href="{% url "Registro" %}">Registro</a>
                </div>
            </article>
        </section>

    {% endif %}
</main>

{% endblock Contenido %}

{% block scriptJS %}
    <script src="{% static 'js/modalShow.js' %}"></script>
{% endblock scriptJS %}